---
layout: post
title: 快速接入
date: '2023-12-01 18:24:55'
permalink: /post/fast-access-z1sej3u.html
published: true
---

# 快速接入

快速接入是RTMS为完成端侧与平台快速连接所定制的个性功能，该功能通过协议或DBC文件，可以快速实现解析、调试和模型、点表的创建，提升了嵌入式工程师点表配置的效率。  
快速接入的前置条件：需要用户将T-AMS与实车进行连接，可以获取到CAN报文信息。目前仅支持基于CAN的报文和数据解析。  
​![image](http://127.0.0.1:6806/assets/image-20231129134619-d700uqt.png)​

## 定义规则​​

​![image](http://127.0.0.1:6806/assets/image-20231129135502-lfu39vo.png)​

点击快速接入后，进入快速接入页面，可以看到基本信息区和规则区，基本信息是对本次的快速接入进行基本配置，规则区定义的是报文解析的规则。

### 基本信息配置

在基本信息区，您需要完成名称、设备类型、Chema版本号、上报格式、支持型号的录入，其中有如下几点需要注意：

1. 名称：要求不能有重复，在点表管理和模型管理中保证唯一；
2. 设备类型：为设备的简称，具体可查看点表产品简称映射进行匹配，若缺失，请联系管理员维护；
3. Chema版本号：用户自定义，在CAN报文获取下必填，他和点表版本号不是一个概念；
4. 支持型号：该模型、点表所支持的T-AMS型号；

### 基于模板解析

​![image](http://127.0.0.1:6806/assets/image-20231129135517-nv78otp.png)​​​  
<span style="font-weight: bold;" class="mark">前置条件：需要完成协议模板中内容的填写，才可以进行协议的解析。
注意：因点表规则，协议起始位需在原始位基础上增加64，如起始位为0，此时起始位应修改为64；DBC无需该操作，RTMS在解析后会自动进行增加。</span>

1. 在规则区右上角点击上传协议，上传编辑完成的模板；​​

​![image](http://127.0.0.1:6806/assets/image-20231129135525-inht9af.png)​

2. 解析完成后，会提示成功，点击确定即可查看。

### 基于DBC解析

因点表限制，目前支持Intel Standard和Motorola Sequential的DBC解析，解析后需手动配置后才可使用。

​![image](http://127.0.0.1:6806/assets/image-20231129135917-06xa4eb.png)​​​

1. 点击规则区右上角的上传DBC，完成DBC的上传与解析；​​

​![image](http://127.0.0.1:6806/assets/image-20231129135924-bso0ndx.png)​

2. 完成解析后，会提示上传成功；

​![image](http://127.0.0.1:6806/assets/image-20231129135940-3cz7sbq.png)​​​

3. DBC解析后的文件不能直接使用，需要进行配置，点击批量赋值，对对应的字段逆行值的填写。

### 规则调整

在完成协议或DBC解析后，若有部分数据需要做修改，可会通过数据微调或批量复制的方式进行修改，若需要对行数据进行增减，或需要进行大量的内容修改，建议修改原始解析文件后重新解析。

1. 数据微调：针对需要编辑的数值进行点击，即可进入编辑状态，输入对应的数值，即可对内容进行编辑，完成编辑后，点击非输入框区域，即可保存数值；

​![image](http://127.0.0.1:6806/assets/image-20231129135947-33vmw7r.png)​​​

2. 批量赋值：选择规则区右上角的批量赋值，进入批量复制对话框，选择批量赋值的字段，填写对应的值，该字段行即可被批量修改为该值。

完成规则配置后，点击下一页，进入解析报文进行字段的数据验证。

<span style="font-weight: bold;" class="mark">因为规则的设计本身具备专业性，我们没有对字段、属性进行强校验，请各位工程师在进入报文解析前务必对规则信息进行确认。</span>

## 解析报文

​​![image](http://127.0.0.1:6806/assets/image-20231129140033-sqgnf08.png)​​  
<span style="font-weight: bold;" class="mark">用于解析规则的物联终端，必须保证已连接到实车，且车辆启动、盒子上电的状态，才能做数据校验。</span>

1. 在校验终端处输入终端ID，点击校验规则，此时系统会检查该终端是否存在且是否在线，若在线进入报文获取阶段；
2. 报文获取时间为60s，在此期间，RTMS会接收来自该物联终端的报文信息，对应规则进行解析；
3. 若解析到对应CANID上的报文信息值，会在解析值当中进行哦呈现；
4. 当时间到达60s或手动点击停止检验后，即可停止报文获取；
5. 您可以对此过程中校验的项目进行导出，亦可进入下一步创建模型和点表；

## 创建模型、点表

在规则校验的页面中点击新建按钮，此时系统会进行如下操作：

1. 根据规则在根云系统完成连接模型创建，并自动生成物模型，连接模型信息可以在模型管理查看；
2. 根据规则生成点表信息，该信息生成后会保存在RTMS的点表管理中，若某个物联终端需要使用该点表，需要将点表通过下发器下发至物联终端；
